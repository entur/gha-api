{"openapi":"3.0.1","info":{"title":"Organisations V3 OpenAPI definition","description":"This service handles Organisations V3 data","contact":{"name":"Team Avtale","url":"https://enturas.atlassian.net/wiki/spaces/TA/overview","email":"TeamAvtale@entur.org"},"version":"3.0.0"},"servers":[{"url":"http://localhost:9002","description":"Localhost"},{"url":"https://api.dev.entur.io/organisations","description":"DEV server"},{"url":"https://api.staging.entur.io/organisations","description":"STAGING server"},{"url":"https://api.entur.io/organisations","description":"PROD server"}],"paths":{"/v3/organisations/{organisationId}":{"put":{"tags":["organisation-v-3-controller"],"summary":"Update an existing organisation","operationId":"updateOrganisation","parameters":[{"name":"organisationId","in":"path","description":"Organisation ID of the organisation to be updated. Cannot be empty.","required":true,"schema":{"type":"integer","format":"int32"}}],"requestBody":{"description":"Updated organisation object","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationV3Modifier"}}},"required":true},"responses":{"201":{"description":"Organisation updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationV3Response"}}}},"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Invalid input supplied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"You are not authorized to view the resource","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/v3/organisations/codespaces/{id}":{"put":{"tags":["organisation-v-3-controller"],"summary":"Update list of codespaces for organisation by id","operationId":"updateOrganisationCodespaces","parameters":[{"name":"id","in":"path","description":"organisation id of the organisation to be updated. Cannot be empty.","required":true,"schema":{"type":"integer","format":"int32"}}],"requestBody":{"description":"Updated codespace object","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationCodespaceModifier"}}},"required":true},"responses":{"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"Codespaces updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationV3Response"}}}},"400":{"description":"Invalid input supplied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"You are not authorized to view the resource","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/v3/organisations/aliases/{organisationId}":{"get":{"tags":["organisation-v-3-controller"],"summary":"Get aliases for organisation by id","operationId":"getAliasForOrganisationById","parameters":[{"name":"organisationId","in":"path","description":"organisation id of the organisation for which aliases should be obtained. Cannot be empty.","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"List of organisation aliases","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganisationAliasResponse"}}}}},"400":{"description":"Invalid input supplied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"You are not authorized to view the resource","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}},"put":{"tags":["organisation-v-3-controller"],"summary":"Update list of aliases for organisation by id","operationId":"updateOrganisationAlias","parameters":[{"name":"organisationId","in":"path","description":"organisationId of the organisation to be updated. Cannot be empty.","required":true,"schema":{"type":"integer","format":"int32"}}],"requestBody":{"description":"Updated alias object","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationAliasModifier"}}},"required":true},"responses":{"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Invalid input supplied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"You are not authorized to view the resource","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"Alias updated successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganisationAliasResponse"}}}}}}}},"/v3/migrate/codespaces":{"put":{"tags":["internal-v-3-controller"],"summary":"Migrate organisation codespaces","operationId":"migrateOrganisationCodespaces","responses":{"401":{"description":"You are not authorized to initiate migration","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Unit"}}}},"201":{"description":"Migration initiated successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Unit"}}}}}}},"/v3/organisations":{"get":{"tags":["organisation-v-3-controller"],"summary":"Get all organisations","operationId":"getAllOrganisations","responses":{"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"List of all organisations","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganisationV3Response"}}}}},"400":{"description":"Invalid input supplied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"You are not authorized to view the resource","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}},"post":{"tags":["organisation-v-3-controller"],"summary":"Create a new organisation","operationId":"createOrganisation","requestBody":{"description":"Created organisation object","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationV3Request"}}},"required":true},"responses":{"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"201":{"description":"Organisation created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationV3Response"}}}},"400":{"description":"Invalid input supplied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"You are not authorized to view the resource","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/v3/organisations/{id}/split":{"post":{"tags":["organisation-v-3-controller"],"summary":"Split an organisation","operationId":"splitOrganisation","parameters":[{"name":"id","in":"path","description":"master id (deprecated) or alias of the organisation to replace. Cannot be empty.","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Created organisation object to replace with","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganisationV3Request"}}}},"required":true},"responses":{"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"201":{"description":"Organisation split","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganisationV3Response"}}}}},"400":{"description":"Invalid input supplied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"You are not authorized to view the resource","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/v3/organisations/{id}/replace":{"post":{"tags":["organisation-v-3-controller"],"summary":"Replace an organisation","operationId":"replaceOrganisation","parameters":[{"name":"id","in":"path","description":"master id (deprecated) or alias of the organisation to replace. Cannot be empty.","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Created organisation object to replace with","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationV3Request"}}},"required":true},"responses":{"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Invalid input supplied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"You are not authorized to view the resource","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"201":{"description":"Organisation replaced","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationV3Response"}}}}}}},"/v3/organisations/{idList}/merge":{"post":{"tags":["organisation-v-3-controller"],"summary":"Merge organisations","operationId":"mergeOrganisation","parameters":[{"name":"idList","in":"path","description":"master id (deprecated) or alias list of the organisations to merge. Cannot be empty.","required":true,"schema":{"type":"array","items":{"type":"string"}}}],"requestBody":{"description":"Merged organisation to replace with","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationV3Request"}}},"required":true},"responses":{"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"201":{"description":"Organisation merged","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationV3Response"}}}},"400":{"description":"Invalid input supplied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"You are not authorized to view the resource","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/v3/import":{"post":{"tags":["internal-v-3-controller"],"summary":"Import NOG xml file","operationId":"callImport","requestBody":{"content":{"application/xml":{"schema":{"type":"string"}}},"required":true},"responses":{"202":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}},"400":{"description":"Bad request","content":{"*/*":{"schema":{"type":"object"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"type":"object"}}}},"403":{"description":"Forbidden","content":{"*/*":{"schema":{"type":"object"}}}}},"security":[{"bearerAuth":[]}]}},"/v3/organisations/{id}":{"get":{"tags":["organisation-v-3-controller"],"summary":"Get organisation by organisationId, master id (deprecated) or alias","operationId":"getOrganisationById","parameters":[{"name":"id","in":"path","description":"organisationId or alias of the organisation to be obtained. Cannot be empty.","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"The organisation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationV3Response"}}}},"400":{"description":"Invalid input supplied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"You are not authorized to view the resource","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}},"delete":{"tags":["organisation-v-3-controller"],"summary":"Delete an organisation","operationId":"deleteOrganisation","parameters":[{"name":"id","in":"path","description":"master id (deprecated) or alias of the organisation to be deleted. Cannot be empty.","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Invalid input supplied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"204":{"description":"Organisation deleted","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Unit"}}}},"401":{"description":"You are not authorized to view the resource","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/v3/organisations/{id}/historic":{"get":{"tags":["organisation-v-3-controller"],"summary":"Get historic organisation(s) by master id (deprecated) or alias","operationId":"getOrganisationHistoryById","parameters":[{"name":"id","in":"path","description":"master id (deprecated) of the organisation whose historic organisation(s) is to be obtained. Cannot be empty.","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"The historic organisation","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganisationV3Response"}}}}},"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Invalid input supplied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"You are not authorized to view the resource","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/v3/organisations/internal/{id}":{"get":{"tags":["organisation-v-3-controller"],"summary":"DEPRECATED: Get organisation by organisation id, use /{id} instead","operationId":"getOrganisationByInternalId","parameters":[{"name":"id","in":"path","description":"internal id of the organisation to be obtained. Cannot be empty.","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"The organisation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationV3Response"}}}},"400":{"description":"Invalid input supplied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"You are not authorized to view the resource","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"deprecated":true}},"/v3/organisations/codespaces":{"get":{"tags":["organisation-v-3-controller"],"summary":"Get all codespace and organisation relationships","operationId":"getOrganisationCodespaces","responses":{"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Invalid input supplied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"List of all organisation codespaces","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganisationCodespaceResponse"}}}}},"401":{"description":"You are not authorized to view the resource","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/v3/organisations/aliases":{"get":{"tags":["organisation-v-3-controller"],"summary":"Get all aliases","operationId":"getAllAliases","responses":{"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Invalid input supplied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"You are not authorized to view the resource","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"List of all organisation aliases","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganisationAliasResponse"}}}}}}}},"/v3/audit/organisations":{"get":{"tags":["internal-v-3-controller"],"summary":"Get organisations audit information","operationId":"getOrganisationAuditInformation","responses":{"401":{"description":"You are not authorized to view the resource","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganisationAuditResponse"}}}}},"200":{"description":"List of all organisation versions","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganisationAuditResponse"}}}}}}}},"/v3/audit/codespaces":{"get":{"tags":["internal-v-3-controller"],"summary":"Get organisationcodespace audit information","operationId":"getCodespaceAuditInformation","responses":{"401":{"description":"You are not authorized to view the resource","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganisationCodespaceAuditResponse"}}}}},"200":{"description":"List of all organisationcodespace versions","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganisationCodespaceAuditResponse"}}}}}}}},"/v3/audit/aliases":{"get":{"tags":["internal-v-3-controller"],"summary":"Get organisationaliases audit information","operationId":"getAliasAuditInformation","responses":{"401":{"description":"You are not authorized to view the resource","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganisationAliasAuditResponse"}}}}},"200":{"description":"List of all organisationalias versions","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganisationAliasAuditResponse"}}}}}}}}},"components":{"schemas":{"OrganisationV3Modifier":{"required":["validFrom"],"type":"object","properties":{"validFrom":{"type":"string","format":"date-time"},"validTo":{"type":"string","format":"date-time"},"companyNumber":{"type":"string"},"vatNumber":{"type":"string"},"legalName":{"type":"string"},"tradingName":{"type":"string"},"companyContactUrl":{"type":"string"},"companyContactEmail":{"type":"string"},"companyContactPhone":{"type":"string"}}},"OrganisationV3Response":{"required":["countryCode","legalName","organisationId","tradingName","validFrom","version"],"type":"object","properties":{"internalId":{"type":"integer","description":"Use organisationId instead","format":"int32","deprecated":true},"organisationId":{"type":"integer","format":"int32"},"companyNumber":{"type":"string"},"vatNumber":{"type":"string"},"countryCode":{"type":"string"},"tradingName":{"type":"string"},"legalName":{"type":"string"},"version":{"type":"integer","format":"int32"},"validFrom":{"type":"string","format":"date-time"},"validTo":{"type":"string","format":"date-time"},"companyContactUrl":{"type":"string"},"companyContactEmail":{"type":"string"},"companyContactPhone":{"type":"string"}}},"ApiError":{"required":["error","exception","path","status","timestamp"],"type":"object","properties":{"error":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"exception":{"type":"string"},"message":{"type":"string"},"status":{"type":"integer","format":"int32"},"path":{"type":"string"}}},"OrganisationCodespaceModifier":{"required":["codespaceIds"],"type":"object","properties":{"codespaceIds":{"type":"array","items":{"type":"string"}}}},"OrganisationAliasModifier":{"required":["aliases"],"type":"object","properties":{"aliases":{"type":"array","items":{"type":"string"}}}},"OrganisationAliasResponse":{"required":["aliases","organisationId"],"type":"object","properties":{"internalId":{"type":"integer","description":"Use organisationId instead","format":"int32","deprecated":true},"organisationId":{"type":"integer","format":"int32"},"aliases":{"type":"array","items":{"type":"string"}}}},"Unit":{"type":"object"},"OrganisationV3Request":{"required":["countryCode","legalName","organisationId","tradingName","validFrom"],"type":"object","properties":{"organisationId":{"type":"integer","format":"int32"},"companyNumber":{"type":"string"},"vatNumber":{"type":"string"},"countryCode":{"pattern":"[A-Z]{2}","type":"string"},"validFrom":{"type":"string","format":"date-time"},"validTo":{"type":"string","format":"date-time"},"legalName":{"type":"string"},"tradingName":{"type":"string"},"companyContactUrl":{"type":"string"},"companyContactEmail":{"type":"string"},"companyContactPhone":{"type":"string"}}},"OrganisationCodespaceResponse":{"required":["codespaces","organisationId"],"type":"object","properties":{"internalId":{"type":"integer","description":"Use organisationId instead","format":"int32","deprecated":true},"organisationId":{"type":"integer","format":"int32"},"codespaces":{"uniqueItems":true,"type":"array","items":{"type":"string"}}}},"AuditResponse":{"type":"object","properties":{"createdAt":{"type":"string","format":"date-time"},"createdBy":{"type":"string"},"changedAt":{"type":"string","format":"date-time"},"changedBy":{"type":"string"}}},"OrganisationAuditResponse":{"required":["auditData","legalName","organisationId","tradingName","validFrom","version"],"type":"object","properties":{"internalId":{"type":"integer","description":"Use organisationId instead","format":"int32","deprecated":true},"organisationId":{"type":"integer","format":"int32"},"version":{"type":"integer","format":"int32"},"validFrom":{"type":"string","format":"date-time"},"validTo":{"type":"string","format":"date-time"},"legalName":{"type":"string"},"tradingName":{"type":"string"},"companyContactUrl":{"type":"string"},"companyContactEmail":{"type":"string"},"companyContactPhone":{"type":"string"},"auditData":{"$ref":"#/components/schemas/AuditResponse"}}},"OrganisationCodespaceAuditResponse":{"required":["codespace","deleted","organisationId","version"],"type":"object","properties":{"internalId":{"type":"integer","description":"Use organisationId instead","format":"int32","deprecated":true},"organisationId":{"type":"integer","format":"int32"},"codespace":{"type":"string"},"auditData":{"$ref":"#/components/schemas/AuditResponse"},"version":{"type":"integer","format":"int32"},"deleted":{"type":"boolean"}}},"OrganisationAliasAuditResponse":{"required":["alias","deleted","internalId","organisationId","version"],"type":"object","properties":{"internalId":{"type":"integer","description":"Use organisationId instead","format":"int32","deprecated":true},"organisationId":{"type":"integer","format":"int32"},"alias":{"type":"string"},"auditData":{"$ref":"#/components/schemas/AuditResponse"},"version":{"type":"integer","format":"int32"},"deleted":{"type":"boolean"}}}}}}